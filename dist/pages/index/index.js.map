{"version":3,"file":"pages/index/index.js","mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAaA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACgRA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAMA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAfA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAfA;AAAA;AAAA;AAiBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;;;;;;;;;;;;;;;;;AAplBA;AAAA;;AA0BA;AAAA;;AACA;AAAA;AAKA;AAAA;AAAA;AAQA;AAAA;AAAA;AAQA;AAAA;AAAA;AAQA;AAAA;AAAA;;AAQA;AAAA;AAEA;AAAA;AAAA;;AAUA;AAAA;;AAQA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;;AAEA;AAAA;;;AAaA;AAAA;;AAgBA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;;AAEA;AAAA;;;AAaA;AAAA;;AAcA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;;AAEA;AAAA;;;AAaA;AAAA;;AAcA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;;AAEA;AAAA;;;AAaA;AAAA;;AAcA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;;AAEA;AAAA;;;AAaA;AAAA;;AASA;AAAA;;;AAOA;AAAA;;;AAGA;AAAA;;AACA;AAAA;;AACA;AAAA;;AAGA;AAAA;;AACA;AAAA;;AAEA;AAAA;;AAEA;AAAA;;AAEA;AAAA;;AAUA;AAAA;;AAcA;AAAA;;AAGA;AAAA;;;;;;;;;;AA7RA;AACA;AAAA;AAAA;;;AAAA;AAAA;AACA;AAEA;AACA;AACA;;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;;AAOA;AACA;AAAA;AAAA;AAAA;;;AAEA;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;;;;;;AAKA;AAGA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAMA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAKA;AAEA;AACA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;;;AAAA;AAAA;AACA;AAEA;AAAA;;;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAKA;AAEA;AACA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;;;AAAA;AAAA;AAAA;AACA;AAAA;;;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAKA;AAEA;AACA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;;;AAAA;AAAA;AAAA;AACA;AAAA;;;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAKA;AAEA;AACA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;;;AAAA;AAAA;AAAA;AACA;AAAA;;;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAKA;AAEA;AACA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;;;AAAA;AAAA;AAAA;AACA;AAAA;;;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;;;;AAIA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AAOA;AAAA;AAEA;AAAA;AAKA;AACA;;AAAA;AAAA;AACA;AACA;AACA;AAIA;;AAGA;AACA;AACA;;AACA;AAAA;;;AAGA;AAKA;AACA;AAAA;;;AADA;AAIA;AAAA;;;AADA;AAMA;AAAA;;;;;;;;;;;;;;ACpSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACPA","sources":["webpack://aydwj/./src/pages/index/index.vue?632f","webpack://aydwj/._src_pages_index_index.vue","webpack://aydwj/./src/pages/index/index.vue?baf6","webpack://aydwj/./src/pages/index/index.vue?5fc5","webpack://aydwj/./src/pages/index/index.vue?f33e"],"sourcesContent":["import { render } from \"./index.vue?vue&type=template&id=1badc801&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1badc801&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\aligu\\\\Downloads\\\\miniapp\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__file',\"src/pages/index/index.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"1badc801\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('1badc801', __exports__)) {\n    api.reload('1badc801', __exports__)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=1badc801&ts=true\", () => {\n    api.rerender('1badc801', render)\n  })\n\n}\n\n\nexport default __exports__","<template>\r\n  <view class=\"index\">\r\n    <scroll-view class=\"scrool-view\" :scroll-y=\"true\" @scrolltolower=\"lower\">\r\n      <!-- <view class=\"title\" style=\"background-color: #ef8086;\">阿姨到我家</view> -->\r\n      <nut-searchbar\r\n        placeholder=\"找阿姨\"\r\n        input-background=\"#fff\"\r\n        v-model=\"searchParam.keyword\"\r\n        @search=\"search\"\r\n        @clear=\"search\"\r\n        style=\"\r\n          background: linear-gradient(\r\n            rgba(236, 128, 126) 0%,\r\n            rgba(236, 128, 126, 0.8) 100%\r\n          );\r\n        \"\r\n      >\r\n        <template v-slot:leftin>\r\n          <nut-icon size=\"14\" name=\"search2\" color=\"#ef8086\"></nut-icon>\r\n        </template>\r\n        <template v-slot:rightin>\r\n          <nut-button type=\"primary\" size=\"small\" @click=\"search\"\r\n            >搜索</nut-button\r\n          >\r\n        </template>\r\n      </nut-searchbar>\r\n\r\n      <view class=\"filter bgc-w\">\r\n        <view class=\"left\">\r\n          <view\r\n            class=\"location left-item\"\r\n            @click=\"() => (servLocationVisible = true)\"\r\n          >\r\n            <view class=\"txt\">地区</view>\r\n            <nut-icon\r\n              name=\"rect-down\"\r\n              size=\"16rpx\"\r\n              style=\"padding-left: 8rpx\"\r\n            ></nut-icon>\r\n          </view>\r\n          <view class=\"age left-item\" @click=\"() => (ageVisible = true)\">\r\n            <view class=\"txt\">年龄</view>\r\n            <nut-icon\r\n              name=\"rect-down\"\r\n              size=\"16rpx\"\r\n              style=\"padding-left: 8rpx\"\r\n            ></nut-icon>\r\n          </view>\r\n          <view class=\"exp left-item\" @click=\"() => (servYearVisible = true)\">\r\n            <view class=\"txt\">经验</view>\r\n            <nut-icon\r\n              name=\"rect-down\"\r\n              size=\"16rpx\"\r\n              style=\"padding-left: 8rpx\"\r\n            ></nut-icon>\r\n          </view>\r\n          <view class=\"rate left-item\" @click=\"() => (rateVisible = true)\">\r\n            <view class=\"txt\">评分</view>\r\n            <nut-icon\r\n              name=\"rect-down\"\r\n              size=\"16rpx\"\r\n              style=\"padding-left: 8rpx\"\r\n            ></nut-icon>\r\n          </view>\r\n        </view>\r\n        <view class=\"right\">\r\n          <view class=\"sort right-item\" @click=\"() => (sortVisible = true)\">\r\n            <view class=\"txt\">排序</view>\r\n            <nut-icon\r\n              name=\"rect-down\"\r\n              size=\"16rpx\"\r\n              style=\"padding-left: 8rpx\"\r\n            ></nut-icon>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"picker-list\">\r\n        <nut-popup\r\n          class=\"picker-item\"\r\n          position=\"bottom\"\r\n          safe-area-inset-bottom=\"true\"\r\n          @click-overlay=\"clickOverlay()\"\r\n          :visible=\"servLocationVisible\"\r\n        >\r\n          <view class=\"container\">\r\n            <view class=\"head\">\r\n              <view class=\"title\">地区</view>\r\n            </view>\r\n            <view class=\"body\">\r\n              <view\r\n                v-for=\"(it, idx) in servLocationColumns\"\r\n                :key=\"idx\"\r\n                :class=\"{\r\n                  item: true,\r\n                  active: servLocationVal == it.value,\r\n                }\"\r\n                @click=\"() => (servLocationVal = it.value)\"\r\n              >\r\n                {{ it.text }}\r\n              </view>\r\n            </view>\r\n            <view class=\"foot\">\r\n              <view class=\"cancel\" @click=\"cancelServLocationVal\"\r\n                >清除筛选</view\r\n              >\r\n              <view class=\"confirm\" @click=\"confirmServLocationVal\">确定</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"zw\" @click=\"clickOverlay()\"></view>\r\n        </nut-popup>\r\n        <nut-popup\r\n          class=\"picker-item\"\r\n          position=\"bottom\"\r\n          safe-area-inset-bottom=\"true\"\r\n          @click-overlay=\"clickOverlay()\"\r\n          :visible=\"ageVisible\"\r\n        >\r\n          <view class=\"container\">\r\n            <view class=\"head\">\r\n              <view class=\"title\">年龄</view>\r\n            </view>\r\n            <view class=\"body\">\r\n              <view\r\n                v-for=\"(it, idx) in ageColumns\"\r\n                :key=\"idx\"\r\n                :class=\"{\r\n                  item: true,\r\n                  active: ageVal == it.value,\r\n                }\"\r\n                @click=\"() => (ageVal = it.value)\"\r\n              >\r\n                {{ it.text }}\r\n              </view>\r\n            </view>\r\n            <view class=\"foot\">\r\n              <view class=\"cancel\" @click=\"cancelAgeVal\">清除筛选</view>\r\n              <view class=\"confirm\" @click=\"confirmAgeVal\">确定</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"zw\" @click=\"clickOverlay()\"></view>\r\n        </nut-popup>\r\n        <nut-popup\r\n          class=\"picker-item\"\r\n          position=\"bottom\"\r\n          safe-area-inset-bottom=\"true\"\r\n          @click-overlay=\"clickOverlay()\"\r\n          :visible=\"servYearVisible\"\r\n        >\r\n          <view class=\"container\">\r\n            <view class=\"head\">\r\n              <view class=\"title\">经验</view>\r\n            </view>\r\n            <view class=\"body\">\r\n              <view\r\n                v-for=\"(it, idx) in servYearColumns\"\r\n                :key=\"idx\"\r\n                :class=\"{\r\n                  item: true,\r\n                  active: servYearVal == it.value,\r\n                }\"\r\n                @click=\"() => (servYearVal = it.value)\"\r\n              >\r\n                {{ it.text }}\r\n              </view>\r\n            </view>\r\n            <view class=\"foot\">\r\n              <view class=\"cancel\" @click=\"cancelServYearVal\">清除筛选</view>\r\n              <view class=\"confirm\" @click=\"confirmServYearVal\">确定</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"zw\" @click=\"clickOverlay()\"></view>\r\n        </nut-popup>\r\n        <nut-popup\r\n          class=\"picker-item\"\r\n          position=\"bottom\"\r\n          safe-area-inset-bottom=\"true\"\r\n          @click-overlay=\"clickOverlay()\"\r\n          :visible=\"rateVisible\"\r\n        >\r\n          <view class=\"container\">\r\n            <view class=\"head\">\r\n              <view class=\"title\">评分</view>\r\n            </view>\r\n            <view class=\"body\">\r\n              <view\r\n                v-for=\"(it, idx) in rateColumns\"\r\n                :key=\"idx\"\r\n                :class=\"{\r\n                  item: true,\r\n                  active: rateVal == it.value,\r\n                }\"\r\n                @click=\"() => (rateVal = it.value)\"\r\n              >\r\n                {{ it.text }}\r\n              </view>\r\n            </view>\r\n            <view class=\"foot\">\r\n              <view class=\"cancel\" @click=\"cancelRateVal\">清除筛选</view>\r\n              <view class=\"confirm\" @click=\"confirmRateVal\">确定</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"zw\" @click=\"clickOverlay()\"></view>\r\n        </nut-popup>\r\n        <nut-popup\r\n          class=\"picker-item\"\r\n          position=\"bottom\"\r\n          safe-area-inset-bottom=\"true\"\r\n          @click-overlay=\"clickOverlay()\"\r\n          :visible=\"sortVisible\"\r\n        >\r\n          <view class=\"container\">\r\n            <view class=\"head\">\r\n              <view class=\"title\">排序</view>\r\n            </view>\r\n            <view class=\"body\">\r\n              <view\r\n                v-for=\"(it, idx) in sortColumns\"\r\n                :key=\"idx\"\r\n                :class=\"{\r\n                  item: true,\r\n                  active: sortVal == it.value,\r\n                }\"\r\n                @click=\"() => (sortVal = it.value)\"\r\n              >\r\n                {{ it.text }}\r\n              </view>\r\n            </view>\r\n            <view class=\"foot\">\r\n              <view class=\"cancel\" @click=\"cancelSortVal\">清除排序</view>\r\n              <view class=\"confirm\" @click=\"confirmSortVal\">确定</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"zw\" @click=\"clickOverlay()\"></view>\r\n        </nut-popup>\r\n      </view>\r\n\r\n      <view class=\"list\">\r\n        <view\r\n          class=\"it\"\r\n          v-for=\"(it, idx) in dataList\"\r\n          :key=\"idx\"\r\n          @click=\"toAyidetail(it.id)\"\r\n        >\r\n          <view class=\"left\">\r\n            <img class=\"img\" :src=\"it.avatar\" />\r\n          </view>\r\n          <view class=\"right\">\r\n            <view class=\"top\">\r\n              <view class=\"name\">\r\n                {{ it.lastname }}{{ it.firstname || \"阿姨\" }}\r\n              </view>\r\n              <view class=\"info\">\r\n                <view class=\"info-it servlocation\">{{ it.servLocation }}</view>\r\n                <nut-divider direction=\"vertical\" />\r\n                <view class=\"info-it servtype\">{{ it.servType }}</view>\r\n                <nut-divider direction=\"vertical\" />\r\n                <view class=\"commentnum\">{{ it.commentNum || 0 }}条评价</view>\r\n              </view>\r\n              <view class=\"rate\">\r\n                <nut-rate\r\n                  active-color=\"#FFC800\"\r\n                  v-model=\"it.rate\"\r\n                  icon-size=\"12\"\r\n                  spacing=\"2\"\r\n                  readonly\r\n                />\r\n              </view>\r\n            </view>\r\n            <view class=\"bottom\">\r\n              <nut-tag\r\n                v-if=\"it.verifed == 1\"\r\n                color=\"rgb(236, 128, 126)\"\r\n                text-color=\"#fff\"\r\n                class=\"tag\"\r\n              >\r\n                已认证\r\n              </nut-tag>\r\n              <!-- <nut-tag v-else color=\"#E9E9E9\" class=\"tag\">未认证</nut-tag> -->\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view v-show=\"moreLoading\" class=\"footer\">\r\n        <nut-divider>加载中 ...</nut-divider>\r\n      </view>\r\n      <view v-show=\"!hasMore\" class=\"footer\">\r\n        <nut-divider>到底啦</nut-divider>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n\r\n  <custom-tab-bar ref=\"tabbar\"></custom-tab-bar>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { reactive, toRefs, ref, onMounted } from \"vue\";\r\nimport Taro, { useDidShow } from \"@tarojs/taro\";\r\nimport CustomTabBar from \"../../components/custom-tab-bar/index.vue\";\r\nimport API from \"../../utils/api\";\r\nimport Constants from \"../../utils/constants\";\r\n\r\nconst defaultAvatar = process.env.DEFAULT_AVATAR;\r\n\r\nexport default {\r\n  name: \"Index\",\r\n  components: {\r\n    \"custom-tab-bar\": CustomTabBar,\r\n  },\r\n  setup() {\r\n    const state = reactive({\r\n      dataList: [],\r\n      moreLoading: false,\r\n      hasMore: true,\r\n      searchParam: {\r\n        pageNum: 1,\r\n        pageSize: 20,\r\n      },\r\n      searchRes: {},\r\n      servLocationVal: \"\",\r\n      servLocationValTmp: \"\",\r\n      servLocationVisible: ref(false),\r\n      servLocationColumns: ref([\r\n        { text: \"全部\", value: \"\" },\r\n        ...Constants.locationList(),\r\n      ]),\r\n      ageVal: \"\",\r\n      ageValTmp: \"\",\r\n      ageVisible: false,\r\n      ageColumns: [\r\n        { text: \"全部\", value: \"\" },\r\n        { text: \"30及以下\", value: \"-30\" },\r\n        { text: \"30-40\", value: \"30-40\" },\r\n        { text: \"40-60\", value: \"40-60\" },\r\n        { text: \"60及以上\", value: \"60-\" },\r\n      ],\r\n      servYearVal: \"\",\r\n      servYearValTmp: \"\",\r\n      servYearVisible: false,\r\n      servYearColumns: [\r\n        { text: \"全部\", value: \"\" },\r\n        { text: \"2年及以下\", value: \"-2\" },\r\n        { text: \"2-5年\", value: \"2-5\" },\r\n        { text: \"5年及以上\", value: \"5-\" },\r\n      ],\r\n      rateVal: \"\",\r\n      rateValTmp: \"\",\r\n      rateVisible: false,\r\n      rateColumns: [\r\n        { text: \"全部\", value: \"\" },\r\n        { text: \"一星\", value: \"0,1\" },\r\n        { text: \"二到四星\", value: \"2,3\" },\r\n        { text: \"四星及以上\", value: \"4,5\" },\r\n      ],\r\n      sortVal: \"\",\r\n      sortValTmp: \"\",\r\n      sortVisible: false,\r\n      sortColumns: [\r\n        { text: \"默认\", value: \"\" },\r\n        { text: \"评分高到低\", value: \"rateDesc\" },\r\n        { text: \"评分低到高\", value: \"rateAsc\" },\r\n        { text: \"年龄高到低\", value: \"ageDesc\" },\r\n        { text: \"年龄低到高\", value: \"ageAsc\" },\r\n        { text: \"工作年限高到低\", value: \"servYearDesc\" },\r\n        { text: \"工作年限低到高\", value: \"servYearAsc\" },\r\n      ],\r\n    });\r\n\r\n    const bindPickerChange = (e) => {\r\n      console.log(e);\r\n    };\r\n\r\n    const tabbar = ref<InstanceType<typeof CustomTabBar>>();\r\n    useDidShow(() => {\r\n      (tabbar.value as any).current = 0;\r\n      setTimeout(() => {\r\n        updateUnreadCount();\r\n      }, 50);\r\n      search();\r\n    });\r\n\r\n    onMounted(() => {\r\n      setInterval(() => {\r\n        updateUnreadCount();\r\n      }, 10 * 1000);\r\n    });\r\n\r\n    const updateUnreadCount = () => {\r\n      let unreadCountData = Taro.getStorageSync(\"unreadCount\");\r\n      if (!unreadCountData) {\r\n        unreadCountData = [];\r\n      }\r\n      let unreadCount = 0;\r\n      unreadCountData\r\n        .filter(\r\n          (it) =>\r\n            it.type == 1 ||\r\n            it.type == 2 ||\r\n            it.type == 3 ||\r\n            it.type == 4 ||\r\n            it.type == 5 ||\r\n            it.type == 6\r\n        )\r\n        .forEach((it) => (unreadCount = unreadCount + it.count));\r\n      if (unreadCount > 99) {\r\n        unreadCount = 99;\r\n      }\r\n      (tabbar.value as any).unreadCount = unreadCount;\r\n    };\r\n\r\n    const toAyidetail = (id) => {\r\n      Taro.navigateTo({\r\n        url: \"/pages/aydetail/index?id=\" + id,\r\n      });\r\n    };\r\n\r\n    const lower = async () => {\r\n      if (!state.hasMore || state.moreLoading) {\r\n        return;\r\n      }\r\n      state.moreLoading = true;\r\n      state.searchParam.pageNum++;\r\n      API.requestAfterHandle(await API.search(state.searchParam), (data) => {\r\n        if (!!data.records && data.records.length > 0) {\r\n          data.records.forEach(it => it.avatar = it.avatar || defaultAvatar)\r\n        }\r\n        state.searchRes = data;\r\n        state.dataList.push(...state.searchRes.records);\r\n        handleAfterSearch();\r\n      });\r\n      state.moreLoading = false;\r\n    };\r\n\r\n    const search = async () => {\r\n      state.hasMore = true;\r\n      state.moreLoading = true;\r\n      state.searchParam.pageNum = 1;\r\n      state.searchParam.pageSize = 20;\r\n      API.requestAfterHandle(await API.search(state.searchParam), (data) => {\r\n        if (!!data.records && data.records.length > 0) {\r\n          data.records.forEach(it => it.avatar = it.avatar || defaultAvatar)\r\n        }\r\n        state.searchRes = data;\r\n        state.dataList.splice(0, state.dataList.length);\r\n        state.dataList.push(...state.searchRes.records);\r\n        handleAfterSearch();\r\n      });\r\n      state.moreLoading = false;\r\n    };\r\n\r\n    const handleAfterSearch = () => {\r\n      if (state.searchRes.current >= state.searchRes.pages) {\r\n        state.hasMore = false;\r\n      }\r\n    };\r\n\r\n    //\r\n    const confirmServLocationVal = () => {\r\n      state.servLocationValTmp = state.servLocationVal;\r\n      state.searchParam.servLocation = state.servLocationVal;\r\n      state.servLocationVisible = false;\r\n      search();\r\n    };\r\n    const cancelServLocationVal = () => {\r\n      state.servLocationVal = \"\";\r\n      state.servLocationValTmp = \"\";\r\n      state.searchParam.servLocation = \"\";\r\n      initFilter();\r\n      state.servLocationVisible = false;\r\n      search();\r\n    };\r\n    //\r\n    const confirmAgeVal = () => {\r\n      state.ageValTmp = state.ageVal;\r\n      const split = state.ageVal.split(\"-\");\r\n      state.searchParam.ageStart = split[0];\r\n      state.searchParam.ageEnd = split[1];\r\n      state.ageVisible = false;\r\n      search();\r\n    };\r\n    const cancelAgeVal = () => {\r\n      state.ageVal = \"\";\r\n      state.ageValTmp = \"\";\r\n      state.searchParam.ageStart = \"\";\r\n      state.searchParam.ageEnd = \"\";\r\n      initFilter();\r\n      state.ageVisible = false;\r\n      search();\r\n    };\r\n    //\r\n    const confirmServYearVal = () => {\r\n      state.servYearValTmp = state.servYearVal;\r\n      const split = state.servYearVal.split(\"-\");\r\n      state.searchParam.servYearStart = split[0];\r\n      state.searchParam.servYearEnd = split[1];\r\n      state.servYearVisible = false;\r\n      search();\r\n    };\r\n    const cancelServYearVal = () => {\r\n      state.servYearVal = \"\";\r\n      state.servYearValTmp = \"\";\r\n      state.searchParam.servYearStart = \"\";\r\n      state.searchParam.servYearEnd = \"\";\r\n      initFilter();\r\n      state.servYearVisible = false;\r\n      search();\r\n    };\r\n    //\r\n    const confirmRateVal = () => {\r\n      state.rateValTmp = state.rateVal;\r\n      state.searchParam.rate = state.rateVal\r\n        .split(\",\")\r\n        .filter((item) => !!item);\r\n      state.rateVisible = false;\r\n      search();\r\n    };\r\n    const cancelRateVal = () => {\r\n      state.rateVal = \"\";\r\n      state.rateValTmp = \"\";\r\n      state.searchParam.rate = [];\r\n      initFilter();\r\n      state.rateVisible = false;\r\n      search();\r\n    };\r\n    //\r\n    const confirmSortVal = () => {\r\n      state.sortValTmp = state.sortVal;\r\n      state.searchParam.sort = state.sortVal;\r\n      state.sortVisible = false;\r\n      search();\r\n    };\r\n    const cancelSortVal = () => {\r\n      state.sortVal = \"\";\r\n      state.sortValTmp = \"\";\r\n      state.searchParam.sort = \"\";\r\n      initFilter();\r\n      state.sortVisible = false;\r\n      search();\r\n    };\r\n\r\n    const clickOverlay = () => {\r\n      state.servLocationVal = state.servLocationValTmp;\r\n      state.ageVal = state.ageValTmp;\r\n      state.servYearVal = state.servYearValTmp;\r\n      state.rateVal = state.rateValTmp;\r\n      state.sortVal = state.sortValTmp;\r\n      state.servLocationVisible = false;\r\n      state.ageVisible = false;\r\n      state.servYearVisible = false;\r\n      state.rateVisible = false;\r\n      state.sortVisible = false;\r\n    };\r\n\r\n    const initFilter = () => {\r\n      state.servLocationVal = \"\";\r\n      state.servLocationValTmp = \"\";\r\n      state.searchParam.servLocation = \"\";\r\n\r\n      state.ageVal = \"\";\r\n      state.ageValTmp = \"\";\r\n      state.searchParam.ageStart = \"\";\r\n      state.searchParam.ageEnd = \"\";\r\n\r\n      state.servYearVal = \"\";\r\n      state.servYearValTmp = \"\";\r\n      state.searchParam.servYearStart = \"\";\r\n      state.searchParam.servYearEnd = \"\";\r\n\r\n      state.rateVal = \"\";\r\n      state.rateValTmp = \"\";\r\n      state.searchParam.rate = [];\r\n\r\n      state.sortVal = \"\";\r\n      state.sortValTmp = \"\";\r\n      state.searchParam.sort = \"\";\r\n    };\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      tabbar,\r\n      toAyidetail,\r\n      lower,\r\n      search,\r\n      bindPickerChange,\r\n      confirmServLocationVal,\r\n      confirmAgeVal,\r\n      confirmServYearVal,\r\n      confirmRateVal,\r\n      confirmSortVal,\r\n      cancelServLocationVal,\r\n      cancelAgeVal,\r\n      cancelServYearVal,\r\n      cancelRateVal,\r\n      cancelSortVal,\r\n      clickOverlay,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.index {\r\n  font-size: 28rpx;\r\n  height: 100%;\r\n  padding-bottom: 100rpx;\r\n\r\n  .scrool-view {\r\n    height: 100vh;\r\n\r\n    .footer {\r\n      padding: 0 100rpx 20rpx 100rpx;\r\n    }\r\n  }\r\n\r\n  .title {\r\n    font-size: 32rpx;\r\n    font-weight: 600;\r\n    padding: 20rpx 20rpx;\r\n  }\r\n\r\n  .filter {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 24rpx;\r\n    padding: 10rpx 40rpx;\r\n    background: linear-gradient(\r\n      rgba(236, 128, 126, 0.8) 0%,\r\n      rgba(236, 128, 126, 0.5) 100%\r\n    );\r\n    // font-weight: 550;\r\n    // color: #fff;\r\n\r\n    .left {\r\n      display: flex;\r\n\r\n      .left-item {\r\n        padding-left: 20rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        position: relative;\r\n\r\n        .txt {\r\n          padding-right: 4rpx;\r\n        }\r\n\r\n        .list {\r\n          position: absolute;\r\n          top: 30rpx;\r\n          background: #fff;\r\n          width: 100rpx;\r\n          padding: 20rpx;\r\n          line-height: 1.4rem;\r\n          left: -20rpx;\r\n          box-shadow: 0 0 2rpx 0 #909090;\r\n        }\r\n      }\r\n\r\n      :first-child {\r\n        padding-left: 0 !important;\r\n      }\r\n    }\r\n\r\n    .right {\r\n      .right-item {\r\n        display: flex;\r\n        align-items: center;\r\n        .txt {\r\n          padding-right: 4rpx;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    margin: 20rpx 30rpx;\r\n    padding-bottom: 20rpx;\r\n\r\n    .it {\r\n      width: 340rpx;\r\n      // height: 200rpx;\r\n      padding: 30rpx 20rpx;\r\n      background: #fff;\r\n      border-radius: 20rpx;\r\n      display: flex;\r\n      margin-top: 20rpx;\r\n      box-sizing: border-box;\r\n\r\n      .left {\r\n        padding: 10rpx;\r\n        box-sizing: border-box;\r\n\r\n        .img {\r\n          width: 80rpx;\r\n          height: 80rpx;\r\n        }\r\n      }\r\n\r\n      .right {\r\n        padding-left: 10rpx;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        justify-content: space-between;\r\n        width: 100%;\r\n        font-size: 22rpx;\r\n\r\n        .top {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: flex-start;\r\n\r\n          .name {\r\n            font-size: 28rpx;\r\n            font-weight: 600;\r\n          }\r\n\r\n          .info {\r\n            display: flex;\r\n            padding-top: 4rpx;\r\n            font-size: 18rpx;\r\n            align-items: center;\r\n\r\n            .info-it {\r\n              padding: 4rpx;\r\n            }\r\n\r\n            .servlocation {\r\n            }\r\n\r\n            .servType {\r\n              flex: 1;\r\n            }\r\n\r\n            :first-child {\r\n              border-left: none;\r\n            }\r\n          }\r\n\r\n          .rate {\r\n            padding-top: 4rpx;\r\n          }\r\n        }\r\n\r\n        .bottom {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          width: 100%;\r\n          padding-top: 4rpx;\r\n          height: 30rpx;\r\n\r\n          .tag {\r\n            font-size: 18rpx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.nut-divider.nut-divider-vertical {\r\n  margin: 0 4rpx;\r\n}\r\n\r\n.popup-bottom {\r\n  box-shadow: 0px -5px 10px -5px #a7a7a7;\r\n}\r\n\r\n.picker-list {\r\n  .picker-item {\r\n    text-align: center;\r\n\r\n    .nut-overlay {\r\n      background: rgba(0, 0, 0, 0);\r\n    }\r\n\r\n    .nut-popup {\r\n      background-color: inherit;\r\n      .container {\r\n        background-color: #fff;\r\n      }\r\n\r\n      .zw {\r\n        height: 100rpx;\r\n      }\r\n    }\r\n\r\n    .head {\r\n      font-size: 28rpx;\r\n      font-weight: 600;\r\n      height: 100rpx;\r\n      line-height: 100rpx;\r\n      // padding-top: 10rpx;\r\n\r\n      .title {\r\n        padding: 0;\r\n      }\r\n    }\r\n\r\n    .body {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      height: 530rpx;\r\n      box-sizing: content-box;\r\n      overflow: auto;\r\n      align-content: flex-start;\r\n\r\n      .item {\r\n        width: 313rpx;\r\n        font-size: 24rpx;\r\n        line-height: 2rem;\r\n        height: 80rpx;\r\n        line-height: 80rpx;\r\n        margin: 10rpx 30rpx;\r\n        border-radius: 40rpx;\r\n        border: 1rpx solid #ccc;\r\n        padding: 0 20rpx;\r\n        box-sizing: border-box;\r\n\r\n        &.active {\r\n          background-color: #ea8382;\r\n          color: #fff;\r\n          box-shadow: 0 0 8rpx 0 #ea8382;\r\n        }\r\n      }\r\n    }\r\n\r\n    .foot {\r\n      display: flex;\r\n      width: 100%;\r\n      height: 100rpx;\r\n      line-height: 130rpx;\r\n      box-shadow: 0px -1px 1px 0px #ccc;\r\n\r\n      .cancel {\r\n        background-color: #ccc;\r\n        flex: 1;\r\n        height: 80rpx;\r\n        line-height: 80rpx;\r\n        margin: 10rpx 20rpx;\r\n        border-radius: 20rpx;\r\n      }\r\n\r\n      .confirm {\r\n        background-color: #ea8382;\r\n        color: #fff;\r\n        flex: 1;\r\n        height: 80rpx;\r\n        line-height: 80rpx;\r\n        margin: 10rpx 20rpx;\r\n        border-radius: 10rpx;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"阿姨推推\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/index/index', {root:{cn:[]}}, config || {}))\n\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=ts\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=ts\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=template&id=1badc801&ts=true\""],"names":[],"sourceRoot":""}