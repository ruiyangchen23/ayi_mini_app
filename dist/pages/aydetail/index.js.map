{"version":3,"file":"pages/aydetail/index.js","mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAaA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC2TA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAvBA;AAAA;AAAA;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;A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","sources":["webpack://aydwj/./src/pages/aydetail/index.vue?d1df","webpack://aydwj/._src_pages_aydetail_index.vue","webpack://aydwj/./src/pages/aydetail/index.vue?685a","webpack://aydwj/./src/pages/aydetail/index.vue?284e","webpack://aydwj/./src/pages/aydetail/index.vue?428e"],"sourcesContent":["import { render } from \"./index.vue?vue&type=template&id=1436c960\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1436c960&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\aligu\\\\Downloads\\\\miniapp\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__file',\"src/pages/aydetail/index.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"1436c960\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('1436c960', __exports__)) {\n    api.reload('1436c960', __exports__)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=1436c960\", () => {\n    api.rerender('1436c960', render)\n  })\n\n}\n\n\nexport default __exports__","<template>\r\n  <scroll-view\r\n    class=\"scroll-view\"\r\n    :scroll-y=\"true\"\r\n    @scrolltolower=\"lower\"\r\n    :scroll-into-view=\"toView\"\r\n    :scroll-top=\"scrollTop\"\r\n  >\r\n    <view class=\"aydetail\" v-if=\"info\">\r\n      <view class=\"info\">\r\n        <view class=\"left\">\r\n          <img class=\"avatar\" :src=\"info.avatar\" />\r\n        </view>\r\n        <view class=\"right\">\r\n          <view class=\"name row\">\r\n            <view class=\"txt\">\r\n              {{ info.lastname }}{{ info.firstname || \"阿姨\" }}\r\n            </view>\r\n            <view class=\"coll\" @click=\"collectHandle\">\r\n              <nut-icon\r\n                v-show=\"info.hasCollect < 1\"\r\n                name=\"heart1\"\r\n                size=\"40rpx\"\r\n                color=\"rgb(236, 128, 126)\"\r\n              ></nut-icon>\r\n              <nut-icon\r\n                v-show=\"info.hasCollect > 0\"\r\n                name=\"heart-fill\"\r\n                size=\"40rpx\"\r\n                color=\"rgb(236, 128, 126)\"\r\n              ></nut-icon>\r\n            </view>\r\n          </view>\r\n          <view class=\"tag row\">\r\n            <nut-tag\r\n              v-if=\"info.verifed == 1\"\r\n              color=\"rgb(236, 128, 126)\"\r\n              text-color=\"#fff\"\r\n            >\r\n              已认证\r\n            </nut-tag>\r\n            <!-- <nut-tag v-else color=\"#E9E9E9\">未认证</nut-tag> -->\r\n          </view>\r\n          <view class=\"rate row\">\r\n            <nut-rate\r\n              active-color=\"#FFC800\"\r\n              v-model=\"info.rate\"\r\n              icon-size=\"18\"\r\n              spacing=\"2\"\r\n              readonly\r\n            />\r\n          </view>\r\n          <view class=\"comment-num row\">\r\n            <view>{{ info.commentNum || 0 }} 条评价</view>\r\n            <nut-tag plain @click=\"toComment\" color=\"rgb(236, 128, 126)\"\r\n              >写评价</nut-tag\r\n            >\r\n          </view>\r\n          <view class=\"btns row\">\r\n            <nut-tag\r\n              v-if=\"info.verifed != 1 && info.currentUser > 0\"\r\n              color=\"#ff0000\"\r\n              text-color=\"#ff0000\"\r\n              plain\r\n              @click=\"toAycert\"\r\n            >\r\n              去认证\r\n            </nut-tag>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <!-- 信息 -->\r\n      <view class=\"basic\">\r\n        <nut-cell-group>\r\n          <nut-cell title=\"来自\" :desc=\"info.hometown\"></nut-cell>\r\n          <nut-cell title=\"年龄\" :desc=\"info.age\"></nut-cell>\r\n          <nut-cell title=\"服务类型\" :desc=\"info.servType\"></nut-cell>\r\n          <nut-cell title=\"服务地区\" :desc=\"info.servLocation\"></nut-cell>\r\n          <nut-cell title=\"服务年限\" :desc=\"info.servYear\"></nut-cell>\r\n          <nut-cell title=\"自我介绍\">\r\n            <template v-slot:link>\r\n              <nut-icon\r\n                name=\"horizontal\"\r\n                @click=\"() => (infoPopupVisible = true)\"\r\n              ></nut-icon>\r\n            </template>\r\n          </nut-cell>\r\n          <nut-cell v-if=\"info?.imgArr && info.imgArr.length > 0\" title=\"图片\">\r\n            <template v-slot:link>\r\n              <nut-icon\r\n                name=\"horizontal\"\r\n                @click=\"() => (imgsPopupVisible = true)\"\r\n              />\r\n            </template>\r\n          </nut-cell>\r\n          <nut-cell v-else title=\"图片\" />\r\n          <nut-cell\r\n            v-if=\"info.mobile\"\r\n            title=\"手机号码\"\r\n            :desc=\"info.mobile\"\r\n          ></nut-cell>\r\n          <nut-cell v-else title=\"手机号码\" />\r\n          <nut-cell\r\n            v-if=\"info.wxcode\"\r\n            title=\"微信号\"\r\n            :desc=\"info.wxcode\"\r\n            @click=\"copy(info.wxcode)\"\r\n          ></nut-cell>\r\n          <nut-cell v-else title=\"微信号\" />\r\n          <!-- <nut-cell title=\"微信二维码\">\r\n            <template v-slot:link>\r\n              <nut-icon\r\n                name=\"scan\"\r\n                @click=\"() => (wxqrcodePopupVisible = true)\"\r\n              ></nut-icon>\r\n            </template>\r\n          </nut-cell> -->\r\n        </nut-cell-group>\r\n      </view>\r\n      <!-- 评价 -->\r\n      <view class=\"comment bgc-w\">\r\n        <view class=\"head\">评价</view>\r\n        <view v-if=\"!commentList || commentList.length < 1\" class=\"nocomment\">\r\n          暂无评论\r\n        </view>\r\n        <view v-else class=\"list\">\r\n          <template v-for=\"(it, idx) in commentList\" :key=\"idx\">\r\n            <nut-divider\r\n              v-if=\"idx > 0\"\r\n              :style=\"{\r\n                color: '#d5d5d5',\r\n                borderColor: '#d5d5d5',\r\n                padding: '0 16px',\r\n              }\"\r\n            />\r\n            <view class=\"it\">\r\n              <view class=\"left\">\r\n                <img class=\"avatar\" :src=\"it.avatar\" />\r\n              </view>\r\n              <view class=\"right\">\r\n                <view class=\"nickname\">\r\n                  <view>{{ it.nickname }}</view>\r\n                  <view\r\n                    class=\"ay-main-txt reply\"\r\n                    @click=\"replycommentPopupShow(it)\"\r\n                    >回复</view\r\n                  >\r\n                </view>\r\n                <view class=\"rate row\">\r\n                  <nut-rate\r\n                    active-color=\"#FFC800\"\r\n                    v-model=\"it.rate\"\r\n                    icon-size=\"12\"\r\n                    spacing=\"2\"\r\n                    readonly\r\n                  />\r\n                </view>\r\n                <view class=\"timeandlocation row\">\r\n                  <view class=\"time\">{{ it.createTimeStr }}</view>\r\n                  <nut-divider direction=\"vertical\" />\r\n                  <view class=\"location\">{{ it.servLocation }}</view>\r\n                  <nut-divider direction=\"vertical\" />\r\n                  <view class=\"servtype\">{{ it.servType }}</view>\r\n                </view>\r\n                <view class=\"timeandlocation row\">\r\n                  <view class=\"time\"\r\n                    >服务时间：{{ it.servStartTimeStr }}-{{\r\n                      it.servEndTimeStr\r\n                    }}</view\r\n                  >\r\n                </view>\r\n                <view class=\"timeandlocation row\">\r\n                  <view class=\"location\">支付金额：{{ it.payamountTxt }}</view>\r\n                </view>\r\n                <view\r\n                  v-if=\"it.imgArr && it.imgArr.length > 0\"\r\n                  class=\"timeandlocation row\"\r\n                >\r\n                  <view class=\"imgs\">\r\n                    <img\r\n                      class=\"img\"\r\n                      v-for=\"(img, idx) in it.imgArr\"\r\n                      :key=\"idx\"\r\n                      :src=\"img\"\r\n                      @click=\"viewCommentImgs(it.imgArr)\"\r\n                    />\r\n                  </view>\r\n                </view>\r\n                <view class=\"content row\">\r\n                  {{ it.commentContent }}\r\n                </view>\r\n                <view\r\n                  v-if=\"it.replyCommentNum > 0\"\r\n                  class=\"replycomment-list row\"\r\n                >\r\n                  <view\r\n                    v-for=\"(it1, idx1) in it.replycommentList\"\r\n                    :key=\"idx1\"\r\n                    class=\"it\"\r\n                  >\r\n                    <view class=\"it-left\">\r\n                      <img class=\"it-avatar\" :src=\"it1.avatar\" />\r\n                    </view>\r\n                    <view class=\"it-right\">\r\n                      <view class=\"it-name\">\r\n                        <view>{{ it1.nickname }}</view>\r\n                        <view\r\n                          class=\"ay-main-txt reply\"\r\n                          @click=\"replycommentPopupShow(it, it1)\"\r\n                        >\r\n                          回复\r\n                        </view>\r\n                      </view>\r\n                      <view class=\"it-time row\">{{ it1.createTimeStr }}</view>\r\n                      <view class=\"it-content row\">\r\n                        {{ it1.commentContent }}\r\n                      </view>\r\n                    </view>\r\n                  </view>\r\n                  <nut-divider\r\n                    v-if=\"!it.replycommentPage\"\r\n                    content-position=\"left\"\r\n                    @click=\"replycommentPage(it)\"\r\n                  >\r\n                    展开 {{ it.replyCommentNum }} 条回复\r\n                    <nut-icon\r\n                      name=\"rect-down\"\r\n                      size=\".8rem\"\r\n                      style=\"margin-left: 4rpx\"\r\n                    ></nut-icon>\r\n                  </nut-divider>\r\n                  <nut-divider\r\n                    v-else-if=\"\r\n                      it.replycommentPage.current < it.replycommentPage.pages\r\n                    \"\r\n                    content-position=\"left\"\r\n                    @click=\"replycommentPage(it)\"\r\n                  >\r\n                    展开更多条回复\r\n                    <nut-icon\r\n                      name=\"rect-down\"\r\n                      size=\".8rem\"\r\n                      style=\"margin-left: 4rpx\"\r\n                    ></nut-icon>\r\n                  </nut-divider>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </template>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-show=\"commentLoading\" class=\"footer\">\r\n      <nut-divider\r\n        :style=\"{\r\n          color: '#d5d5d5',\r\n          borderColor: '#d5d5d5',\r\n          padding: '0 50rpx',\r\n        }\"\r\n        >加载中...</nut-divider\r\n      >\r\n    </view>\r\n    <view v-show=\"!commentHasMore\" class=\"footer\">\r\n      <nut-divider\r\n        :style=\"{\r\n          color: '#d5d5d5',\r\n          borderColor: '#d5d5d5',\r\n          padding: '0 50rpx',\r\n        }\"\r\n        >到底啦</nut-divider\r\n      >\r\n    </view>\r\n  </scroll-view>\r\n\r\n  <nut-popup v-model:visible=\"infoPopupVisible\">\r\n    <view class=\"bg-w\" style=\"width: 500rpx; height: 700rpx; padding: 30rpx\">\r\n      {{ info?.info }}\r\n    </view>\r\n  </nut-popup>\r\n\r\n  <nut-popup v-model:visible=\"wxqrcodePopupVisible\">\r\n    <img\r\n      style=\"width: 500rpx; height: 500rpx; border-radius: 30rpx\"\r\n      :src=\"info?.wxqrcode\"\r\n    />\r\n  </nut-popup>\r\n\r\n  <nut-popup v-model:visible=\"imgsPopupVisible\" class=\"imgs-popup\">\r\n    <swiper indicator-dots=\"true\" style=\"width: 600rpx; height: 600rpx\">\r\n      <swiper-item v-for=\"(it, idx) in info?.imgArr\" :key=\"idx\">\r\n        <img\r\n          style=\"width: 100%; height: 100%; border-radius: 30rpx\"\r\n          :src=\"it\"\r\n        />\r\n      </swiper-item>\r\n    </swiper>\r\n  </nut-popup>\r\n\r\n  <nut-popup v-model:visible=\"commentImgsPopupVisible\" class=\"imgs-popup\">\r\n    <swiper indicator-dots=\"true\" style=\"width: 600rpx; height: 600rpx\">\r\n      <swiper-item v-for=\"(it, idx) in commentImgs\" :key=\"idx\">\r\n        <img\r\n          style=\"width: 100%; height: 100%; border-radius: 30rpx\"\r\n          :src=\"it\"\r\n        />\r\n      </swiper-item>\r\n    </swiper>\r\n  </nut-popup>\r\n\r\n  <nut-popup\r\n    position=\"bottom\"\r\n    :style=\"{ padding: '20rpx', boxSizing: 'border-box' }\"\r\n    v-model:visible=\"replycommentPopupVisible\"\r\n  >\r\n    <view class=\"reply-container\">\r\n      <nut-input\r\n        v-model=\"replycommentSubmitData.content\"\r\n        type=\"textarea\"\r\n        show-word-limit\r\n        rows=\"2\"\r\n        max-length=\"150\"\r\n        :placeholder=\"'回复 @' + replycommentSubmitData.nickname + ' :'\"\r\n      />\r\n      <nut-button\r\n        v-show=\"\r\n          replycommentSubmitData.content &&\r\n          replycommentSubmitData.content.length > 0\r\n        \"\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        @click=\"replycommentSubmit\"\r\n      >\r\n        回复\r\n      </nut-button>\r\n    </view>\r\n  </nut-popup>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, onMounted } from \"vue\";\r\nimport Taro from \"@tarojs/taro\";\r\nimport API from \"../../utils/api\";\r\n\r\nconst defaultAvatar = process.env.DEFAULT_AVATAR;\r\n\r\nexport default {\r\n  name: \"Aydetail\",\r\n  components: {},\r\n  setup() {\r\n    const state = reactive({\r\n      user: null,\r\n      $instance: null,\r\n      id: null,\r\n      info: null,\r\n      ayCommentPageParam: {},\r\n      ayCommentPageRes: {},\r\n      commentList: [],\r\n      commentHasMore: true,\r\n      commentLoading: false,\r\n      collectLoading: false,\r\n      infoPopupVisible: false,\r\n      wxqrcodePopupVisible: false,\r\n      imgsPopupVisible: false,\r\n      commentImgsPopupVisible: false,\r\n      commentImgs: [],\r\n      replycommentPopupVisible: false,\r\n      replycommentSubmitData: {\r\n        ayId: \"\",\r\n        commentId: \"\",\r\n        replycommentId: \"\",\r\n        content: \"\",\r\n      },\r\n    });\r\n\r\n    // 进入时触发\r\n    onMounted(async () => {\r\n      state.user = Taro.getStorageSync(\"user\");\r\n      // 建议在页面初始化时把 getCurrentInstance() 的结果保存下来供后面使用，\r\n      // 而不是频繁地调用此 API\r\n      state.$instance = Taro.getCurrentInstance();\r\n      state.id = state.$instance.router.params.id;\r\n      // 加载阿姨信息\r\n      API.ayDetail(state.id).then((ayDetailRes) => {\r\n        API.requestAfterHandle(ayDetailRes, (data) => {\r\n          if (!!data) {\r\n            data.avatar = data.avatar || defaultAvatar;\r\n          }\r\n          state.info = data;\r\n          if (state.info.imgs) {\r\n            state.info.imgArr = state.info.imgs.split(\",\");\r\n          }\r\n        });\r\n      });\r\n      state.ayCommentPageParam.ayId = state.id;\r\n      // 加载评论信息\r\n      state.ayCommentPageParam.pageNum = 1;\r\n      state.ayCommentPageParam.pageSize = 20;\r\n      state.commentLoading = true;\r\n      API.requestAfterHandle(\r\n        await API.ayCommentPage(state.ayCommentPageParam),\r\n        (data) => {\r\n          handleCommentPageTime(data.records);\r\n          for (const it of data.records) {\r\n            it.replycommentList = [];\r\n            if (it.imgs) {\r\n              it.imgArr = it.imgs.split(\",\");\r\n            }\r\n          }\r\n          state.ayCommentPageRes = data;\r\n          state.commentList.splice(0, state.commentList.length);\r\n          state.commentList.push(...state.ayCommentPageRes.records);\r\n          handleAfterCommentPage();\r\n        }\r\n      );\r\n      state.commentLoading = false;\r\n    });\r\n\r\n    // 跳转页面相关\r\n    const toComment = () => {\r\n      Taro.navigateTo({\r\n        url: \"/pages/comment/index?ayId=\" + state.id,\r\n      });\r\n    };\r\n    const toAycert = () => {\r\n      Taro.navigateTo({\r\n        url: \"/pages/aycert/index?id=\" + state.id + \"&type=实名认证\",\r\n      });\r\n    };\r\n\r\n    // 页面滚动相关\r\n    const lower = async () => {\r\n      if (!state.commentHasMore || state.commentLoading) {\r\n        return;\r\n      }\r\n      state.commentLoading = true;\r\n      state.ayCommentPageParam.pageNum++;\r\n      API.requestAfterHandle(\r\n        await API.ayCommentPage(state.ayCommentPageParam),\r\n        (data) => {\r\n          handleCommentPageTime(data.records);\r\n          for (const it of data.records) {\r\n            it.replycommentList = [];\r\n            if (it.imgs) {\r\n              it.imgArr = it.imgs.split(\",\");\r\n            }\r\n          }\r\n\r\n          state.ayCommentPageRes = data;\r\n          state.commentList.push(...state.ayCommentPageRes.records);\r\n          handleAfterCommentPage();\r\n        }\r\n      );\r\n      state.commentLoading = false;\r\n    };\r\n\r\n    // 其他工具函数\r\n    const handleAfterCommentPage = () => {\r\n      if (state.ayCommentPageRes.current >= state.ayCommentPageRes.pages) {\r\n        state.commentHasMore = false;\r\n      }\r\n    };\r\n    const handleCommentPageTime = (list) => {\r\n      const now = new Date().getTime();\r\n      if (!list || list.length < 1) return;\r\n      for (const it of list) {\r\n        it.createTimeStr = API.timeTxt(it.createTime);\r\n        if (it.servStartTime) {\r\n          it.servStartTimeStr = API.timeTxt2(it.servStartTime);\r\n        }\r\n        if (it.servEndTime) {\r\n          it.servEndTimeStr = API.timeTxt2(it.servEndTime);\r\n        }\r\n      }\r\n    };\r\n    const copy = (txt) => {\r\n      if (!txt) return false;\r\n      Taro.setClipboardData({\r\n        data: txt,\r\n        success: function (res) {\r\n          Taro.showToast({\r\n            title: \"复制成功\",\r\n            icon: \"success\",\r\n            duration: 1500,\r\n          });\r\n        },\r\n      });\r\n    };\r\n\r\n    // 收藏处理\r\n    const collectHandle = async () => {\r\n      if (state.collectLoading) {\r\n        return;\r\n      }\r\n      state.collectLoading = true;\r\n      if (state.info.hasCollect > 0) {\r\n        state.info.hasCollect = 0;\r\n        API.requestAfterHandle(await API.myDelCollect(state.info.id));\r\n      } else {\r\n        state.info.hasCollect = 1;\r\n        API.requestAfterHandle(await API.myAddCollect(state.info.id));\r\n      }\r\n      state.collectLoading = false;\r\n    };\r\n\r\n    // 回复评论\r\n    const replycommentPopupShow = (comment, replycomment) => {\r\n      state.replycommentSubmitData.content = \"\";\r\n      state.replycommentSubmitData.ayId = state.id;\r\n      state.replycommentSubmitData.commentId = comment.id;\r\n\r\n      if (replycomment) {\r\n        state.replycommentSubmitData.replycommentId = replycomment.id;\r\n        state.replycommentSubmitData.nickname = replycomment.nickname;\r\n      } else {\r\n        state.replycommentSubmitData.nickname = comment.nickname;\r\n      }\r\n\r\n      state.replycommentPopupVisible = true;\r\n    };\r\n    const replycommentSubmit = async () => {\r\n      API.requestAfterHandle(\r\n        await API.replycomment(state.replycommentSubmitData),\r\n        () => {\r\n          Taro.showToast({\r\n            title: \"回复成功\",\r\n            icon: \"success\",\r\n            duration: 1500,\r\n          });\r\n        }\r\n      );\r\n      state.replycommentPopupVisible = false;\r\n    };\r\n\r\n    // 搜索回复评论\r\n    const replycommentPage = async (e) => {\r\n      const param = {\r\n        commentId: e.id,\r\n        pageNum: e.replycommentPage ? e.replycommentPage.current + 1 : 1,\r\n        pageSize: 5,\r\n      };\r\n      API.requestAfterHandle(await API.replyCommentPage(param), (data) => {\r\n        e.replycommentPage = data;\r\n        handleCommentPageTime(e.replycommentPage.records);\r\n        e.replycommentList.push(...e.replycommentPage.records);\r\n      });\r\n    };\r\n\r\n    const viewCommentImgs = (imgs) => {\r\n      state.commentImgs.splice(0, state.commentImgs.length);\r\n      state.commentImgs.push(...imgs);\r\n      state.commentImgsPopupVisible = true;\r\n    };\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      copy,\r\n      lower,\r\n      toComment,\r\n      toAycert,\r\n      collectHandle,\r\n      replycommentPopupShow,\r\n      replycommentSubmit,\r\n      replycommentPage,\r\n      viewCommentImgs,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.scroll-view {\r\n  height: 100vh;\r\n\r\n  .footer {\r\n    padding-bottom: 1px;\r\n  }\r\n}\r\n\r\n.aydetail {\r\n  padding: 30rpx 30rpx 0 30rpx;\r\n\r\n  .info {\r\n    display: flex;\r\n    padding: 30rpx;\r\n    border-radius: 20rpx;\r\n    align-items: center;\r\n\r\n    .left {\r\n      display: flex;\r\n\r\n      .row {\r\n        padding-top: 10rpx;\r\n      }\r\n\r\n      .avatar {\r\n        width: 160rpx;\r\n        height: 160rpx;\r\n      }\r\n    }\r\n\r\n    .right {\r\n      padding-left: 60rpx;\r\n      flex: 1;\r\n\r\n      > .row {\r\n        padding-top: 10rpx;\r\n      }\r\n\r\n      .name {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 32rpx;\r\n        font-weight: 600;\r\n        padding-top: 0;\r\n      }\r\n\r\n      .comment-num {\r\n        font-size: 28rpx;\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      .tocert {\r\n      }\r\n    }\r\n  }\r\n\r\n  .comment {\r\n    margin-top: 30rpx;\r\n    padding: 20rpx;\r\n    border-radius: 20rpx;\r\n\r\n    .head {\r\n      font-size: 30rpx;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .nocomment {\r\n      text-align: center;\r\n      font-size: 26rpx;\r\n      color: #ccc;\r\n      line-height: 1.6rem;\r\n    }\r\n\r\n    .list {\r\n      .it {\r\n        padding-top: 30rpx;\r\n        display: flex;\r\n        align-items: flex-start;\r\n\r\n        .left {\r\n          .avatar {\r\n            width: 100rpx;\r\n            height: 100rpx;\r\n          }\r\n        }\r\n\r\n        .right {\r\n          margin-left: 20rpx;\r\n          font-size: 24rpx;\r\n          width: 100%;\r\n\r\n          .row {\r\n            padding-top: 10rpx;\r\n          }\r\n\r\n          .nickname {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            font-size: 28rpx;\r\n\r\n            .reply {\r\n              font-size: 24rpx;\r\n            }\r\n          }\r\n\r\n          .timeandlocation {\r\n            display: flex;\r\n            color: #ccc;\r\n\r\n            .imgs {\r\n              display: flex;\r\n              .img {\r\n                width: 100rpx;\r\n                height: 100rpx;\r\n                margin-right: 10rpx;\r\n              }\r\n            }\r\n          }\r\n\r\n          .replycomment-list {\r\n            .nut-divider::after {\r\n              border-color: rgba(0, 0, 0, 0);\r\n            }\r\n\r\n            .it {\r\n              display: flex;\r\n\r\n              .it-left {\r\n                .it-avatar {\r\n                  width: 60rpx;\r\n                  height: 60rpx;\r\n                }\r\n              }\r\n\r\n              .it-right {\r\n                margin-left: 20rpx;\r\n                width: 100%;\r\n\r\n                .it-name {\r\n                  display: flex;\r\n                  justify-content: space-between;\r\n                  font-size: 28rpx;\r\n\r\n                  .reply {\r\n                    font-size: 24rpx;\r\n                  }\r\n                }\r\n\r\n                .it-time {\r\n                  color: #ccc;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.reply-container {\r\n  display: flex;\r\n  align-items: flex-end;\r\n}\r\n\r\n.imgs-popup {\r\n  .popup-center {\r\n    width: 600rpx;\r\n    height: 600rpx;\r\n  }\r\n}\r\n\r\n.nut-popup {\r\n  border-radius: 30rpx;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"阿姨主页\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/aydetail/index', {root:{cn:[]}}, config || {}))\n\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=template&id=1436c960\""],"names":[],"sourceRoot":""}