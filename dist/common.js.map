{"version":3,"file":"common.js","mappings":";;;;;;;;;;;;;AAkFA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAtJA;AAAA;;AACA;AAAA;;AACA;AAAA;;;AASA;AAAA;;;;;;AA2BA;;;;AAMA;;;AAQA;AAAA;;;AAEA;;;;;AAUA;;;;;AAtEA;;AASA;AAAA;AAEA;;AAAA;;AAIA;AAAA;AAAA;AAEA;AAkBA;AAAA;;AAdA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;;AACA;AACA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AAAA;;AAAA;;AAMA;AAWA;AACA;;AAAA;AAAA;AACA;;AAEA;AAAA;;AACA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AAGA;;;;;AAnBA;;;;;;;;;;;;;;;ACpDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACxhBA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;ACzCA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAaA;AACA;AACA;;;;;;;;;;;;;;ACxBA","sources":["webpack://aydwj/._src_components_custom-tab-bar_index.vue","webpack://aydwj/._src_utils_api.js","webpack://aydwj/._src_utils_constants.js","webpack://aydwj/._src_utils_util.js","webpack://aydwj/./src/components/custom-tab-bar/index.vue?91eb","webpack://aydwj/./src/components/custom-tab-bar/index.vue?8513","webpack://aydwj/./src/components/custom-tab-bar/index.vue?50b9"],"sourcesContent":["<template>\r\n  <!-- <view class=\"tabbar\">\r\n        <nut-tabbar v-model:visible=\"current\" :bottom=\"true\" :safe-area-inset-bottom=\"true\" :placeholder=\"true\" @tab-switch=\"tabSwitch\">\r\n            <nut-tabbar-item v-for=\"(item, idx) in state.list\" :key=\"idx\"\r\n                :tab-title=\"item.text\" :icon=\"item.iconPath\" :to=\"item.pagePath\"></nut-tabbar-item>\r\n        </nut-tabbar>\r\n    </view> -->\r\n  <view class=\"tabbar\">\r\n    <view class=\"h5-div nut-tabbar__placeholder\">\r\n      <view class=\"nut-tabbar nut-tabbar-bottom nut-tabbar-safebottom\">\r\n        <template v-for=\"(it, idx) in state.list\" :key=\"idx\">\r\n          <view\r\n            :class=\"{\r\n              'h5-div nut-tabbar-item': true,\r\n              'nut-tabbar-item__icon--unactive': current != idx,\r\n            }\"\r\n            @click=\"tabSwitch(it)\"\r\n          >\r\n            <view class=\"nut-tabbar-item_icon-box\">\r\n              <template v-if=\"it.iconPath\">\r\n                <nut-icon\r\n                  v-if=\"current == idx\"\r\n                  font-class-name=\"iconfont\"\r\n                  class-prefix=\"icon\"\r\n                  :name=\"it.iconPath\"\r\n                  style=\"font-size: 24px; color: #fa2c19\"\r\n                >\r\n                </nut-icon>\r\n                <nut-icon\r\n                  v-if=\"current != idx\"\r\n                  font-class-name=\"iconfont\"\r\n                  class-prefix=\"icon\"\r\n                  :name=\"it.iconPath\"\r\n                  style=\"font-size: 24px\"\r\n                >\r\n                </nut-icon>\r\n              </template>\r\n              <view\r\n                :class=\"{\r\n                  'tabbar-it-unread-count': it.unreadCount && unreadCount && unreadCount > 0,\r\n                  'nut-tabbar-item_icon-box_nav-word': true,\r\n                  'nut-tabbar-item_icon-box_big-word': !!it.text,\r\n                }\"\r\n              >\r\n                <view v-if=\"!!it.text\">{{ it.text }}</view>\r\n                <view v-if=\"it.unreadCount && unreadCount && unreadCount > 0\" class=\"unread-count\">{{ unreadCount }}</view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          <view\r\n            v-if=\"it.children\"\r\n            class=\"overlay-parent\"\r\n            v-show=\"it.childrenShow\"\r\n          >\r\n            <nut-overlay\r\n              class=\"overlay\"\r\n              v-model:visible=\"it.childrenShow\"\r\n              :overlay-style=\"overlayStyle\"\r\n            >\r\n              <view class=\"tabbar-children\">\r\n                <template v-for=\"(tmpIt, tmpIdx) in state.list\" :key=\"tmpIdx\">\r\n                  <view v-if=\"tmpIdx == idx\" class=\"tabbar-blank realy\">\r\n                    <view\r\n                      v-for=\"(childIt, childIdx) in it.children\"\r\n                      :key=\"childIdx\"\r\n                      class=\"child-it nut-tabbar-item_icon-box_big-word\"\r\n                      @click=\"tabSwitch(childIt)\"\r\n                    >\r\n                      {{ childIt.text }}\r\n                    </view>\r\n                  </view>\r\n                  <view v-else class=\"tabbar-blank\"></view>\r\n                </template>\r\n              </view>\r\n            </nut-overlay>\r\n          </view>\r\n        </template>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n<script lang=\"ts\">\r\nimport Taro from \"@tarojs/taro\";\r\nimport { ref, reactive } from \"vue\";\r\n\r\nexport default {\r\n  setup(props) {\r\n    const state = reactive({\r\n      color: \"#B1B1B1\",\r\n      selectedColor: \"#34C266\",\r\n      backgroundColor: \"#F8F8F8\",\r\n      list: [\r\n        {\r\n          pagePath: \"pages/index/index\",\r\n          text: \"找阿姨\",\r\n          // iconPath: 'home'\r\n        },\r\n        {\r\n          iconPath: \"plus-square\",\r\n          children: [\r\n            {\r\n              pagePath: \"pages/comment/index\",\r\n              text: \"雇主-点评阿姨\",\r\n              tabbarPage: false,\r\n            },\r\n            {\r\n              pagePath: \"pages/aycert/index?type=注册\",\r\n              text: \"阿姨-我要注册\",\r\n              tabbarPage: false,\r\n            },\r\n          ],\r\n          childrenShow: false,\r\n        },\r\n        {\r\n          pagePath: \"pages/my/index\",\r\n          text: \"我\",\r\n          unreadCount: true\r\n          // iconPath: 'my'\r\n        },\r\n      ],\r\n      unreadCount: 0\r\n    });\r\n\r\n    const current = ref(0);\r\n    const unreadCount = ref(0);\r\n\r\n    const overlayShow = ref(true);\r\n    const overlayStyle = reactive({\r\n      backgroundColor: \"rgba(0, 0, 0, .0)\",\r\n    });\r\n\r\n    return {\r\n      props,\r\n      state,\r\n      current,\r\n      unreadCount,\r\n      overlayShow,\r\n      overlayStyle,\r\n    };\r\n  },\r\n  props: [],\r\n  computed: {},\r\n  filters: {},\r\n  methods: {\r\n    tabSwitch: (item) => {\r\n      console.log(item);\r\n      if (item.children && item.children.length > 0) {\r\n        item.childrenShow = true;\r\n        return;\r\n      }\r\n      if (item.tabbarPage == false) {\r\n        Taro.navigateTo({ url: \"/\" + item.pagePath });\r\n      } else {\r\n        Taro.switchTab({ url: \"/\" + item.pagePath });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.tabbar-it-unread-count {\r\n  display: flex;\r\n\r\n  .unread-count {\r\n    background-color: #f00;\r\n    font-size: 20rpx;\r\n    width: 24rpx;\r\n    height: 24rpx;\r\n    line-height: 24rpx;\r\n    padding: 2rpx 2rpx;\r\n    color: #fff;\r\n    border-radius: 18rpx;\r\n    margin-left: 4rpx;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.nut-tabbar {\r\n  height: 100rpx;\r\n}\r\n\r\n.overlay-parent {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  .overlay {\r\n    position: relative;\r\n\r\n    .tabbar-children {\r\n      position: absolute;\r\n      bottom: 100rpx;\r\n      left: 0;\r\n      display: flex;\r\n      width: 100%;\r\n\r\n      .tabbar-blank {\r\n        flex: 1;\r\n\r\n        &.realy {\r\n          background-color: #fff;\r\n          // padding: 20rpx;\r\n          text-align: center;\r\n          box-shadow: 0 0 6px #e9e9e9;\r\n        }\r\n\r\n        .child-it {\r\n          padding: 20rpx 0;\r\n          border-bottom: 1px solid #e9e9e9;\r\n        }\r\n\r\n        :last-child {\r\n          border-bottom: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import Taro from '@tarojs/taro'\r\n\r\n/**\r\n * 验证登陆状态\r\n * @returns \r\n */\r\nexport function authCheck() {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/auth/check',\r\n    method: 'GET',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 登录\r\n * @param {string} code - wx.login 后获取到的 code \r\n * @param {string} encryptedData - wx.getUserProfile 后获取到的 encryptedData\r\n * @param {string} iv - wx.getUserProfile 后获取到的 iv\r\n * @returns \r\n */\r\nexport function authLogin(code, encryptedData = null, iv = null) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/auth/login',\r\n    data: {\r\n      appid: process.env.APP_ID,\r\n      encryptedData,\r\n      iv,\r\n      code,\r\n    },\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json'\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 搜索\r\n * @param {object} data - 请求实体 \r\n * @param {string} data.keyword - 关键词\r\n * @param {string} data.location - 服务地区\r\n * @param {number} data.ageStart - 年龄区间\r\n * @param {number} data.ageEnd - 年龄区间\r\n * @param {number} data.servYear - 服务年限区间\r\n * @param {number} data.servYear - 服务年限区间\r\n * @param {number} data.rateStart - 评分区间\r\n * @param {number} data.rateEnd - 评分区间\r\n * @param {string} data.sort - 排序：rateAsc、rateDesc、ageAsc、ageDesc、servYearAsc、servYearDesc\r\n * @param {number} data.pageNum - 当前页(从1开始)\r\n * @param {number} data.pageSize - 页容量\r\n * @returns \r\n */\r\nexport function search(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/search',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 阿姨信息\r\n * @param {string} id - 阿姨ID\r\n * @returns \r\n */\r\nexport function ayDetail(id) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/detail/' + id,\r\n    method: 'GET',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 阿姨点评列表(分页)\r\n * @param {object} data - 请求实体 \r\n * @param {string} data.ayId - 阿姨ID\r\n * @param {number} data.pageNum - 当前页(从1开始)\r\n * @param {number} data.pageSize - 页容量\r\n * @returns \r\n */\r\nexport function ayCommentPage(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/commentPage',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 回复点评列表(分页)\r\n * @param {object} data - 请求实体 \r\n * @param {string} data.commentId - 点评ID\r\n * @param {number} data.pageNum - 当前页(从1开始)\r\n * @param {number} data.pageSize - 页容量\r\n * @returns \r\n */\r\nexport function replyCommentPage(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/replyCommentPage',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 点评阿姨\r\n * @param {object} data - 请求实体 \r\n * @returns \r\n */\r\nexport function comment(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/comment',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 回复评论\r\n * @param {object} data - 请求实体 \r\n * @returns \r\n */\r\nexport function replycomment(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/replycomment',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 阿姨认证/注册\r\n * @param {object} data - 请求实体 \r\n * @returns \r\n */\r\nexport function cert(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/ay/cert',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 我的点评\r\n * @param {object} data - 请求实体 \r\n * @returns \r\n */\r\nexport function myCommentPage(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/commentPage',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 我的收藏\r\n * @param {object} data - 请求实体 \r\n * @returns \r\n */\r\nexport function myCollectPage(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/collectPage',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 添加我的收藏\r\n * @param {string} ayId - 阿姨ID\r\n * @returns \r\n */\r\nexport function myAddCollect(ayId) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/addCollect/' + ayId,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 删除我的收藏\r\n * @param {string} ayId - 阿姨ID\r\n * @returns \r\n */\r\nexport function myDelCollect(ayId) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/delCollect/' + ayId,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 我的评论消息\r\n * @param {object} data - 请求实体 \r\n * @param {number} data.pageNum - 当前页(从1开始)\r\n * @param {number} data.pageSize - 页容量\r\n * @returns \r\n */\r\nexport function myCommentMsg(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/commentMsg',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 我的系统消息\r\n * @param {object} data - 请求实体 \r\n * @param {number} data.pageNum - 当前页(从1开始)\r\n * @param {number} data.pageSize - 页容量\r\n * @returns \r\n */\r\nexport function mySysMsg(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/sysMsg',\r\n    data,\r\n    method: 'POST',\r\n    header: {\r\n      // 默认值\r\n      'content-type': 'application/json',\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 我的认证\r\n * @returns \r\n */\r\nexport function myCert() {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/cert',\r\n    method: 'GET',\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 未读数量\r\n * @returns \r\n */\r\nexport function countUnread() {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/count-unread',\r\n    method: 'GET',\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 未读数量\r\n * @returns \r\n */\r\nexport function readAll(types) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/read-all',\r\n    method: 'GET',\r\n    data: {\r\n      types\r\n    },\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 评论明细\r\n * @returns \r\n */\r\nexport function commentDetail(id) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/comment-detail/' + id,\r\n    method: 'GET',\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\nexport function fileUpload() {\r\n\r\n}\r\n\r\n/**\r\n * 下载图片 \r\n */\r\nexport function downloadImg(url) {\r\n  return Taro.downloadFile({\r\n    url: url,\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 异常处理\r\n */\r\nexport function requestAfterHandle(res, succCall) {\r\n  // 刷新 token\r\n  if (res && res.data && res.data.newtoken) {\r\n    const user = Taro.getStorageSync(\"user\");\r\n    user.token = res.data.newtoken;\r\n    Taro.setStorageSync(\"user\", user);\r\n  }\r\n  // 重新组装新的响应\r\n  // 1. 服务器状态码错误\r\n  if (!/^2/.test(res.statusCode)) {\r\n    console.error('服务繁忙', res);\r\n    Taro.showToast({\r\n      title: '服务繁忙，请稍后重试',\r\n      icon: \"error\",\r\n      duration: 2000,\r\n      mask: true,\r\n    });\r\n    return { data: null, msg: 'err' };\r\n  }\r\n  // 2. 未登录\r\n  if (res.data.code == 401) {\r\n    console.error('未登录', res);\r\n    // Taro.showToast({\r\n    //   title: '未登录，请登录',\r\n    //   icon: \"error\",\r\n    //   duration: 2000,\r\n    //   mask: true,\r\n    // });\r\n\r\n    // 移除用户信息\r\n    Taro.removeStorageSync(\"user\");\r\n    login();\r\n    return { data: null, msg: 'auth' };\r\n  }\r\n  // 3. 其他错误\r\n  if (!/^2/.test(res.data.code)) {\r\n    console.error('请求失败', res);\r\n    Taro.hideLoading();\r\n    Taro.showToast({\r\n      title: res.data.message || '请求失败，请稍后重试',\r\n      icon: \"error\",\r\n      duration: 2000,\r\n      mask: true,\r\n    });\r\n    return { data: null, msg: 'err' };\r\n  }\r\n  // 正常\r\n  const returnRes = { data: res.data.data, msg: 'ok' };\r\n  if (succCall) {\r\n    succCall(returnRes.data);\r\n  }\r\n  return returnRes;\r\n}\r\n\r\n/**\r\n * 登录\r\n */\r\nexport function login(succCall) {\r\n  Taro.login({\r\n    success: function (res) {\r\n      if (res.code) {\r\n        authLogin(res.code).then(authRes => {\r\n          requestAfterHandle(authRes, data => {\r\n            Taro.setStorageSync(\"user\", data);\r\n            succCall && succCall();\r\n          });\r\n        });\r\n      } else {\r\n        console.log(\"登录失败！\" + res.errMsg);\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * 保存用户信息\r\n */\r\nexport function saveProfile(data) {\r\n  return Taro.request({\r\n    url: process.env.REQ_BASE_URL + '/simple/my/save-profile',\r\n    method: 'POST',\r\n    data,\r\n    header: {\r\n      // 默认值\r\n      'miniapp-token': Taro.getStorageSync('user').token\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 异常处理\r\n */\r\nexport function requestAfterHandle2(res) {\r\n  if (!/^2/.test(res.statusCode)) {\r\n    console.error('请求错误', res);\r\n    return null;\r\n  }\r\n  return res.data;\r\n}\r\n\r\n/**\r\n * 时间格式化\r\n */\r\nexport function timeTxt(time) {\r\n  const now = new Date().getTime();\r\n  const date = new Date(time);\r\n  const createTime = date.getTime();\r\n  const timeDiff = now - createTime;\r\n  if (now - createTime < 1000 * 60) {\r\n    return '刚刚';\r\n  }\r\n  if (now - createTime < 1000 * 60 * 60) {\r\n    return (timeDiff / 1000 / 60 + \"\").split(\".\")[0] + \"分钟前\";\r\n  }\r\n  if (now - createTime < 1000 * 60 * 60 * 24) {\r\n    return (timeDiff / 1000 / 60 / 60 + \"\").split(\".\")[0] + \"小时前\";\r\n  }\r\n  if (timeDiff < 1000 * 60 * 60 * 24 * 4) {\r\n    return (timeDiff / 1000 / 60 / 60 / 24 + \"\").split(\".\")[0] + \"天前\";\r\n  }\r\n  return date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\r\n}\r\n\r\n/**\r\n * 时间格式化\r\n */\r\nexport function timeTxt2(time) {\r\n  const now = new Date().getTime();\r\n  const date = new Date(time);\r\n  return date.getFullYear() + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate();\r\n}\r\n\r\nexport default {\r\n  authCheck,\r\n  authLogin,\r\n  search,\r\n  ayDetail,\r\n  ayCommentPage,\r\n  replyCommentPage,\r\n  comment,\r\n  replycomment,\r\n  cert,\r\n  myCommentPage,\r\n  myCollectPage,\r\n  myAddCollect,\r\n  myDelCollect,\r\n  myCommentMsg,\r\n  mySysMsg,\r\n  requestAfterHandle,\r\n  timeTxt,\r\n  timeTxt2,\r\n  myCert,\r\n  requestAfterHandle2,\r\n  countUnread,\r\n  readAll,\r\n  commentDetail,\r\n  downloadImg,\r\n  login,\r\n  saveProfile,\r\n}\r\n","export default {\r\n  locationList: () => [\r\n    { text: \"北京\", value: \"北京\" },\r\n    { text: \"天津\", value: \"天津\" },\r\n    { text: \"河北\", value: \"河北\" },\r\n    { text: \"山西\", value: \"山西\" },\r\n    { text: \"内蒙古\", value: \"内蒙古\" },\r\n    { text: \"辽宁\", value: \"辽宁\" },\r\n    { text: \"吉林\", value: \"吉林\" },\r\n    { text: \"黑龙江\", value: \"黑龙江\" },\r\n    { text: \"上海\", value: \"上海\" },\r\n    { text: \"江苏\", value: \"江苏\" },\r\n    { text: \"浙江\", value: \"浙江\" },\r\n    { text: \"安徽\", value: \"安徽\" },\r\n    { text: \"福建\", value: \"福建\" },\r\n    { text: \"江西\", value: \"江西\" },\r\n    { text: \"山东\", value: \"山东\" },\r\n    { text: \"河南\", value: \"河南\" },\r\n    { text: \"湖北\", value: \"湖北\" },\r\n    { text: \"湖南\", value: \"湖南\" },\r\n    { text: \"广东\", value: \"广东\" },\r\n    { text: \"广西\", value: \"广西\" },\r\n    { text: \"海南\", value: \"海南\" },\r\n    { text: \"重庆\", value: \"重庆\" },\r\n    { text: \"四川\", value: \"四川\" },\r\n    { text: \"贵州\", value: \"贵州\" },\r\n    { text: \"云南\", value: \"云南\" },\r\n    { text: \"西藏\", value: \"西藏\" },\r\n    { text: \"陕西\", value: \"陕西\" },\r\n    { text: \"甘肃\", value: \"甘肃\" },\r\n    { text: \"青海\", value: \"青海\" },\r\n    { text: \"宁夏\", value: \"宁夏\" },\r\n    { text: \"新疆\", value: \"新疆\" },\r\n    { text: \"香港\", value: \"香港\" },\r\n    { text: \"澳门\", value: \"澳门\" },\r\n    { text: \"台湾\", value: \"台湾\" },\r\n  ],\r\n  servTypeList: () => [\r\n    { text: '月嫂', value: '月嫂' },\r\n    { text: '育儿嫂', value: '育儿嫂' }\r\n  ],\r\n}\r\n","import Taro from '@tarojs/taro';\r\n\r\nexport default {\r\n  /**\r\n   * 格式化日期 \r\n   */\r\n  formatDate: (date) => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  },\r\n  /**\r\n   * 切割日期\r\n   */\r\n  splitDate: (date) => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return [year, month, day];\r\n  },\r\n  /**\r\n   * 切割图片成 uploader 组件可识别的格式\r\n   */\r\n  splitImgs: (str) => {\r\n    if (!str) return;\r\n    return str.split(',').filter(url => !!url).map(url => {\r\n      const urlSplitArr = url.split(\"/\");\r\n      return {\r\n        name: urlSplitArr[urlSplitArr.length - 1],\r\n        url,\r\n        status: 'success',\r\n        message: '上传成功',\r\n        type: 'image'\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 复制\r\n   */\r\n  copy: (txt) => {\r\n    Taro.setClipboardData({\r\n      data: txt,\r\n      success: function (res) {\r\n        Taro.showToast({\r\n          title: '已复制',\r\n          icon: 'success',\r\n          duration: 1500\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { render } from \"./index.vue?vue&type=template&id=b80e755c&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=b80e755c&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\aligu\\\\Downloads\\\\miniapp\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__file',\"src/components/custom-tab-bar/index.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"b80e755c\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('b80e755c', __exports__)) {\n    api.reload('b80e755c', __exports__)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=b80e755c&ts=true\", () => {\n    api.rerender('b80e755c', render)\n  })\n\n}\n\n\nexport default __exports__","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=ts\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=script&lang=ts\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-26.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./index.vue?vue&type=template&id=b80e755c&ts=true\""],"names":[],"sourceRoot":""}